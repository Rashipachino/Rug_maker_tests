/**
 * An example of how to write unit tests.
 * Use this as a basis to build a more complete Test.cpp file.
 * 
 * IMPORTANT: Please write more tests - the tests here are only for example and are not complete.
 *
 * AUTHORS: <Rashi Pachino 345174478>
 * 
 * Date: 2021-02
 */

#include "doctest.h"
#include "mat.hpp"
using namespace ariel;

#include <string>
#include <algorithm>
using namespace std;

/**
 * Returns the input string without the whitespace characters: space, newline and tab.
 * Requires std=c++2a.
 */
string nospaces(string input) {
	std::erase(input, ' ');
	std::erase(input, '\t');
	std::erase(input, '\n');
	std::erase(input, '\r');
	return input;
}


TEST_CASE("Good input") {
	CHECK(nospaces(mat(9, 7, '@', '-')) == nospaces("@@@@@@@@@\n"
													 "@-------@\n"
													 "@-@@@@@-@\n"
													 "@-@---@-@\n"
													 "@-@@@@@-@\n"
													 "@-------@\n"
													 "@@@@@@@@@"));
	CHECK(nospaces(mat(5, 3, '*', 'o')) == nospaces("ooooo\n"
													 "o***o\n"
													 "ooooo"));
    CHECK(nospaces(mat(9, 5, 'x', '+')) == nospaces("xxxxxxxxx\n"
													 "x+++++++x\n"
													 "x+xxxxx+x\n"
													 "x+++++++x\n"
													 "xxxxxxxxx"));
    CHECK(nospaces(mat(7, 1, '%', '#')) == nospaces("%%%%%%%"));
    CHECK(nospaces(mat(11, 5, '@', '^')) == nospaces("@@@@@@@@@@@\n"
													 "@^^^^^^^^^@\n"
													 "@^@@@@@@@^@\n"
													 "@^^^^^^^^^@\n"
													 "@@@@@@@@@@@"));
    CHECK(nospaces(mat(1, 1, '#', 's')) == nospaces("#"));
    CHECK(nospaces(mat(7, 3, '&', ' ')) == nospaces("&&&&&&&\n"
													 "&     &\n"
													 "&&&&&&&"));
    CHECK(nospaces(mat(11, 5, ' ', 'z')) == nospaces("           \n"
													 " zzzzzzzzz \n"
													 " z       z \n"
													 " zzzzzzzzz \n"
													 "           "));
    CHECK(nospaces(mat(9, 9, '+', '-')) == nospaces("+++++++++\n"
													 "+-------+\n"
													 "+-+++++-+\n"
													 "+-+---+-+\n"
													 "+-+-+-+-+\n"
													 "+-+---+-+\n"
                                                     "+-+++++-+\n"
                                                     "+-------+\n"
                                                     "+++++++++"));
    CHECK(nospaces(mat(3, 3, '*', '*')) == nospaces("***\n"
													 "***\n"
													 "***"));
}

TEST_CASE("Bad input") {
    CHECK_THROWS(mat(10, 5, '$', '%'));
    CHECK_THROWS(mat(-2, 4, '$', '$'));
    CHECK_THROWS(mat(0, 5, 'x', 'y'));
    CHECK_THROWS(mat(10, -5, '$', '%'));
    CHECK_THROWS(mat(0, 0, ' ', '('));
}


/* Add more test cases here */
TEST_CASE("Large input"){
    CHECK(nospaces(mat(99, 13, 'A', '.')) == nospaces("AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n"
                                                        "A.................................................................................................A\n"
                                                        "A.AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.A\n"
                                                        "A.A.............................................................................................A.A\n"
                                                        "A.A.AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.A.A\n"
                                                        "A.A.A.........................................................................................A.A.A\n"
                                                        "A.A.A.AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.A.A.A\n"
                                                        "A.A.A.........................................................................................A.A.A\n"
                                                        "A.A.AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.A.A\n"
                                                        "A.A.............................................................................................A.A\n"
                                                        "A.AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.A\n"
                                                        "A.................................................................................................A\n"
                                                        "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"));
    CHECK(nospaces(mat(19, 13, 'x', 'o')) == nospaces("xxxxxxxxxxxxxxxxxxx\n"
                                                        "xooooooooooooooooox\n"
                                                        "xoxxxxxxxxxxxxxxxox\n"
                                                        "xoxoooooooooooooxox\n"
                                                        "xoxoxxxxxxxxxxxoxox\n"
                                                        "xoxoxoooooooooxoxox\n"
                                                        "xoxoxoxxxxxxxoxoxox\n"
                                                        "xoxoxoooooooooxoxox\n"
                                                        "xoxoxxxxxxxxxxxoxox\n"
                                                        "xoxoooooooooooooxox\n"
                                                        "xoxxxxxxxxxxxxxxxox\n"
                                                        "xooooooooooooooooox\n"
                                                        "xxxxxxxxxxxxxxxxxxx"));
    CHECK(nospaces(mat(33, 33, '$', '-')) == nospaces("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n"
                                                        "$-------------------------------$\n"
                                                        "$-$$$$$$$$$$$$$$$$$$$$$$$$$$$$$-$\n"
                                                        "$-$---------------------------$-$\n"
                                                        "$-$-$$$$$$$$$$$$$$$$$$$$$$$$$-$-$\n"
                                                        "$-$-$-----------------------$-$-$\n"
                                                        "$-$-$-$$$$$$$$$$$$$$$$$$$$$-$-$-$\n"
                                                        "$-$-$-$-------------------$-$-$-$\n"
                                                        "$-$-$-$-$$$$$$$$$$$$$$$$$-$-$-$-$\n"
                                                        "$-$-$-$-$---------------$-$-$-$-$\n"
                                                        "$-$-$-$-$-$$$$$$$$$$$$$-$-$-$-$-$\n"
                                                        "$-$-$-$-$-$-----------$-$-$-$-$-$\n"
                                                        "$-$-$-$-$-$-$$$$$$$$$-$-$-$-$-$-$\n"
                                                        "$-$-$-$-$-$-$-------$-$-$-$-$-$-$\n"
                                                        "$-$-$-$-$-$-$-$$$$$-$-$-$-$-$-$-$\n"
                                                        "$-$-$-$-$-$-$-$---$-$-$-$-$-$-$-$\n"
                                                        "$-$-$-$-$-$-$-$-$-$-$-$-$-$-$-$-$\n"
                                                        "$-$-$-$-$-$-$-$---$-$-$-$-$-$-$-$\n"
                                                        "$-$-$-$-$-$-$-$$$$$-$-$-$-$-$-$-$\n"
                                                        "$-$-$-$-$-$-$-------$-$-$-$-$-$-$\n"
                                                        "$-$-$-$-$-$-$$$$$$$$$-$-$-$-$-$-$\n"
                                                        "$-$-$-$-$-$-----------$-$-$-$-$-$\n"
                                                        "$-$-$-$-$-$$$$$$$$$$$$$-$-$-$-$-$\n"
                                                        "$-$-$-$-$---------------$-$-$-$-$\n"
                                                        "$-$-$-$-$$$$$$$$$$$$$$$$$-$-$-$-$\n"
                                                        "$-$-$-$-------------------$-$-$-$\n"
                                                        "$-$-$-$$$$$$$$$$$$$$$$$$$$$-$-$-$\n"
                                                        "$-$-$-----------------------$-$-$\n"
                                                        "$-$-$$$$$$$$$$$$$$$$$$$$$$$$$-$-$\n"
                                                        "$-$---------------------------$-$\n"
                                                        "$-$$$$$$$$$$$$$$$$$$$$$$$$$$$$$-$\n"
                                                        "$-------------------------------$\n"
                                                        "$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$"));
    CHECK(nospaces(mat(45, 15, 'w', '.')) == nospaces("wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww\n"
                                                        "w...........................................w\n"
                                                        "w.wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww.w\n"
                                                        "w.w.......................................w.w\n"
                                                        "w.w.wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww.w.w\n"
                                                        "w.w.w...................................w.w.w\n"
                                                        "w.w.w.wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww.w.w.w\n"
                                                        "w.w.w.w...............................w.w.w.w\n"
                                                        "w.w.w.wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww.w.w.w\n"
                                                        "w.w.w...................................w.w.w\n"
                                                        "w.w.wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww.w.w\n"
                                                        "w.w.......................................w.w\n"
                                                        "w.wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww.w\n"
                                                        "w...........................................w\n"
                                                        "wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww"));
    CHECK(nospaces(mat(103, 65, '=', '.')) == nospaces("=======================================================================================================\n"
                                                        "=.....................................................................................................=\n"
                                                        "=.===================================================================================================.=\n"
                                                        "=.=.................................................................................................=.=\n"
                                                        "=.=.===============================================================================================.=.=\n"
                                                        "=.=.=.............................................................................................=.=.=\n"
                                                        "=.=.=.===========================================================================================.=.=.=\n"
                                                        "=.=.=.=.........................................................................................=.=.=.=\n"
                                                        "=.=.=.=.=======================================================================================.=.=.=.=\n"
                                                        "=.=.=.=.=.....................................................................................=.=.=.=.=\n"
                                                        "=.=.=.=.=.===================================================================================.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.................................................................................=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.===============================================================================.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.............................................................................=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.===========================================================================.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.........................................................................=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=======================================================================.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.....................................................................=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.===================================================================.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.................................................................=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.===============================================================.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.............................................................=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.===========================================================.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.........................................................=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=======================================================.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.....................................................=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.===================================================.=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.=.................................................=.=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.=.===============================================.=.=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.=.=.............................................=.=.=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.=.=.===========================================.=.=.=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.=.=.=.........................................=.=.=.=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.=.=.=.=======================================.=.=.=.=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.=.=.=.........................................=.=.=.=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.=.=.===========================================.=.=.=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.=.=.............................................=.=.=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.=.===============================================.=.=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.=.................................................=.=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.===================================================.=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=.....................................................=.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.=======================================================.=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.=.........................................................=.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.===========================================================.=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.=.............................................................=.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.===============================================================.=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.=.................................................................=.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.===================================================================.=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=.....................................................................=.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.=======================================================================.=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.=.........................................................................=.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.===========================================================================.=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.=.............................................................................=.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.===============================================================================.=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.=.................................................................................=.=.=.=.=.=\n"
                                                        "=.=.=.=.=.===================================================================================.=.=.=.=.=\n"
                                                        "=.=.=.=.=.....................................................................................=.=.=.=.=\n"
                                                        "=.=.=.=.=======================================================================================.=.=.=.=\n"
                                                        "=.=.=.=.........................................................................................=.=.=.=\n"
                                                        "=.=.=.===========================================================================================.=.=.=\n"
                                                        "=.=.=.............................................................................................=.=.=\n"
                                                        "=.=.===============================================================================================.=.=\n"
                                                        "=.=.................................................................................................=.=\n"
                                                        "=.===================================================================================================.=\n"
                                                        "=.....................................................................................................=\n"
                                                        "======================================================================================================="));
}